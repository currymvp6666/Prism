<Window x:Class="Prism.Views.ResetPasswordView"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" 
        xmlns:vm="clr-namespace:Prism.ViewModels"
        Title="找回密码" Height="560" Width="400"
        WindowStartupLocation="CenterScreen" WindowStyle="None" 
        AllowsTransparency="True" Background="Transparent">

    <Window.DataContext>
        <vm:LoginViewModel/>
    </Window.DataContext>

    <Border Background="White" CornerRadius="20" Margin="15">
        <Border.Effect>
            <DropShadowEffect BlurRadius="20" Opacity="0.2"/>
        </Border.Effect>

        <Grid>
            <Button Command="{Binding BackToLoginCommand}"
                    HorizontalAlignment="Right" 
                    VerticalAlignment="Top"
                    Margin="15" 
                    Width="30" Height="30"
                    Background="Transparent" 
                    BorderThickness="0"
                    Cursor="Hand">
                <Button.Style>
                    <Style TargetType="Button">
                        <Setter Property="Foreground" Value="#999"/>
                        <Setter Property="Template">
                            <Setter.Value>
                                <ControlTemplate TargetType="Button">
                                    <Border Background="Transparent">
                                        <TextBlock Text="✕" 
                                                   FontSize="18" 
                                                   HorizontalAlignment="Center" 
                                                   VerticalAlignment="Center"
                                                   FontWeight="Light"/>
                                    </Border>
                                </ControlTemplate>
                            </Setter.Value>
                        </Setter>
                        <Style.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Foreground" Value="#FF4D4D"/>
                            </Trigger>
                        </Style.Triggers>
                    </Style>
                </Button.Style>
            </Button>

            <StackPanel Margin="30">
                <TextBlock Text="重置密码" FontSize="24" FontWeight="Bold" Foreground="#007AFF" HorizontalAlignment="Center" Margin="0,0,0,10"/>
                <TextBlock Text="验证码将发送至您的注册邮箱" FontSize="12" Foreground="#999" HorizontalAlignment="Center" Margin="0,0,0,30"/>

                <TextBlock Text="账号名称" FontSize="12" FontWeight="Bold" Foreground="#666" Margin="0,0,0,5"/>
                <TextBox Style="{StaticResource LoginInputStyle}" 
                         Text="{Binding LoginModel.UserName, UpdateSourceTrigger=PropertyChanged}" />

                <TextBlock Text="注册邮箱" FontSize="12" FontWeight="Bold" Foreground="#666" Margin="0,0,0,5"/>
                <TextBox Style="{StaticResource LoginInputStyle}" 
                         Text="{Binding LoginModel.Email, UpdateSourceTrigger=PropertyChanged}"/>

                <TextBlock Text="验证码" FontSize="12" FontWeight="Bold" Foreground="#666" Margin="0,0,0,5"/>
                <Grid Margin="0,0,0,20">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>
                    <TextBox Height="40" VerticalContentAlignment="Center" Padding="10,0" 
                             Text="{Binding VerificationCode, UpdateSourceTrigger=PropertyChanged}">
                        <TextBox.Resources>
                            <Style TargetType="Border">
                                <Setter Property="CornerRadius" Value="6"/>
                            </Style>
                        </TextBox.Resources>
                    </TextBox>
                    <Button Grid.Column="1" Content="{Binding SendBtnText}" 
                            Command="{Binding SendCodeCommand}"
                            IsEnabled="{Binding IsSendBtnEnabled}"
                            Width="100" Margin="10,0,0,0" Background="#F0F0F0" BorderThickness="0">
                        <Button.Resources>
                            <Style TargetType="Border">
                                <Setter Property="CornerRadius" Value="6"/>
                            </Style>
                        </Button.Resources>
                    </Button>
                </Grid>

                <TextBlock Text="设置新密码" FontSize="12" FontWeight="Bold" Foreground="#666" Margin="0,0,0,5"/>
                <TextBox Style="{StaticResource LoginInputStyle}" 
                         Text="{Binding NewPassword, UpdateSourceTrigger=PropertyChanged}"/>

                <Button Content="确认修改" Command="{Binding ConfirmResetCommand}"
                        Background="#007AFF" Foreground="White" Height="45" FontWeight="Bold" Margin="0,10,0,0">
                    <Button.Resources>
                        <Style TargetType="Border">
                            <Setter Property="CornerRadius" Value="8"/>
                        </Style>
                    </Button.Resources>
                </Button>

                <Button Content="已有账号？返回登录" Style="{StaticResource LinkButtonStyle}" 
                        Command="{Binding BackToLoginCommand}"
                        HorizontalAlignment="Center" Margin="0,20,0,0"/>
            </StackPanel>
        </Grid>
    </Border>
</Window>